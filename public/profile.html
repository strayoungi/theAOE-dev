<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Profile - Ashes of Elysia</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=UnifrakturCook:wght@700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">

<style>

html, body {
  height: 100%;
  margin: 0;
  overflow: hidden;
}

body {
  background-image: url("/img/eidolon.png");
  background-repeat: repeat;
  background-size: cover;
  font-family: 'Press Start 2P', cursive !important;
}

/* === TUTORIAL OVERLAY === */
.tutorial-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  z-index: 9998;
  pointer-events: none; /* Allow scroll events to pass through */
}

.tutorial-content {
  position: fixed;
  background: #362f2c;
  color: white;
  border: 4px solid #d4af4d;
  border-radius: 30px;
  padding: 20px;
  max-width: 400px;
  text-align: center;
  z-index: 9999;
  font-size: 12px; /* Default font size */
  pointer-events: auto; /* Enable interactions on popup */
}

.tutorial-content h2 {
  font-size: 14px;
  margin-bottom: 10px;
}

.tutorial-content p {
  font-size: 12px;
  margin: 10px 0;
}

.tutorial-content button {
  font-size: 12px;
  margin: 5px;
  padding: 10px 20px;
}

.tutorial-step {
  margin: 20px 0;
}

.highlight-box {
  position: fixed;
  border: 4px solid #ff0000;
  border-radius: 10px;
  pointer-events: none;
  animation: pulse 1s infinite;
}

@keyframes pulse {
  0% { border-color: #ff0000; }
  50% { border-color: #ffff00; }
  100% { border-color: #ff0000; }
}

/* === TITLE === */
.title {
  height: 60px;
  margin: 0;
  margin-top: 10px;
  padding: 10px 20px;
  font-family: "UnifrakturCook", cursive;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 50px;
  color: white;
}

/* === MAIN CONTAINER ADJUSTS TO SCREEN === */
.container {
  height: calc(100vh - 60px);
  overflow: hidden;
  padding: 20px;       /* sudah ada */
}

/* === MAIN GRID: DEFINES THE 6 ROWS FOR THE WHOLE UI === */
.main-grid {
  display: grid;
  height: 100%;
  width: 100%;
  grid-template-columns: 2fr 3fr 2fr;
  grid-template-rows: repeat(7, 1fr); 
  gap: 10px;
}

/* === PANELS FOLLOW GLOBAL ROWS (SUBGRID!) === */
.left-panel,
.center-panel,
.right-panel {
  display: grid;
  grid-template-rows: subgrid; 
  grid-row: 1 / 7; /* fill all 6 rows */
  gap: 20px;
}

/* === KIRI === */
.left-panel {
  grid-column: 1;
}

/* === TENGAH === */
.center-panel {
  grid-column: 2;
}

/* === KANAN === */
.right-panel {
  grid-column: 3;
}

/* === BOX STYLE === */
.box {
  /* background: #ccc;
  border: 3px solid #444; */
  text-align: center;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* === ORB GRID === */
.orb-wrapper {
width: 100%;
  height: 100%;
  display: flex;
}

.orb-grid {
  width: 100%;
  height: 100%;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 15px;
}

.box-orb {
  width: 100%;
  height: 100%;
  /* background: #ccc;
  border: 3px solid #444; */
  text-align: center;
  display: flex;
  justify-content: center;
  align-items: center;
  aspect-ratio: 1 / 1;
  overflow: hidden;
}

.avatar-box {
  display: flex;
  justify-content: center;
  align-items: center;
}

.avatar-section {
    display: flex;
    width: 250px;
    height: 250px;
    align-items: center;
    background: #362f2c;
    border: 4px solid #d4af4d;
    border-radius: 30px;
    /* box-shadow: 4px 4px 0 #d4af4d; */
    margin: 0 auto;
}

.avatar-img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
}

.badge-box {
  display: flex;
  justify-content: space-evenly;
}

.badge-section {
    display: flex;
    width: 150px;
    height: auto;
    align-items: center;
    border-radius: 30px;
    /* box-shadow: 4px 4px 0 #d4af4d; */
    margin: 0 auto;
}

.badge-img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
}

.stats-box {
  width: 400px;
  background: #2c2523;
  padding: 5px 20px;
  background: #362f2c;
  border: 4px solid #d4af4d;
  border-radius: 30px;
  color: #fff;
}

.stats-title {
  background: #d4af4d;
  padding: 8px 12px;
  text-align: left;   /* dari center ke left */
  color: #000;
  font-size: 14px;
  margin-bottom: 20px;
  border-radius: 6px;
  display: inline-block; /* biar lebarnya mengikuti teks */
}

.stat-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin: 12px 0;
}

.icon {
  width: 22px;
  height: 22px;
  image-rendering: pixelated;
  margin-right: 10px;
}

.label {
  flex: 1;
  margin-left: 6px;
  font-size: 12px;
}

.value {
  font-size: 12px;
  text-align: right;
  min-width: 70px;
}

.companion-box {
    padding: 8px;
    background: #d4af4d;
    border: 4px solid black;
    border-radius: 30px;
    text-align: center;
    /* box-shadow: 2px 2px 0 black; */
    font-size: 18px;
}

.companion-box-edit {
  padding: 8px;
  background: #2995c1;
  border: 4px solid black;
  border-radius: 30px;
  text-align: center;
  box-shadow: 2px 2px 0 black;
  font-size: 18px;
  cursor: pointer;
}

.companion-section {
    display: flex;
    width: 170px;
    height: 170px;
    align-items: center;
    background: #362f2c;
    border: 4px solid #d4af4d;
    border-radius: 30px;
    /* box-shadow: 4px 4px 0 #d4af4d; */
    margin: 0 auto;
}

.companion-img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
}

.orb-img{
  width: 100%;
  height: 100%;
   object-fit: contain;
}

.pixel-btn {
  font-size: 18px;
  color: white;
  background: #8B1E13; /* warna merah-bata */
  padding: 20px 40px;
  border: 4px solid black;
  border-radius: 15px;
  cursor: pointer;
  text-align: center;

  /* Buat bentuk "oval" pixel + border hitam */
  position: relative;
}

.pixel-btn:hover {
  background: #a2271b;
}

.comp-box{
  display: flex;
  justify-content: space-around;
  align-items: center;
}

@media (max-width: 768px) {
  html, body {
    overflow-y: scroll;
    }
    .container {
    overflow-y: scroll;
    }
  /* MAIN GRID jadi 1 kolom */
  .main-grid {
    grid-template-columns: 1fr;
    grid-template-rows: none;
    height: auto;
  }

  /* PANEL tidak lagi subgrid, jadi layout bebas */
  .left-panel,
  .center-panel,
  .right-panel {
    grid-column: 1;
    grid-row: auto;
    display: block; /* ubah jadi block biasa */
  }

  /* Row span tidak berlaku di mobile */
  .left-panel .box,
  .center-panel .box,
  .right-panel .box {
    grid-row: auto !important;
  }

  /* Container boleh scroll di mobile */
  .container {
    height: auto;
    overflow-y: auto;
  }

  .orb-grid {
    grid-template-columns: repeat(4, 1fr); /* 1 row, 4 kolom */
    gap: 10px; /* opsional */
  }

  /* Pastikan box-orb nya tidak terlalu tinggi */
  .box-orb {
    aspect-ratio: 1 / 1;      /* tetap kotak */
  }

  .comp-box{
    padding-top: 10px;
    padding-bottom: 10px;
  }
}

@media (max-width: 400px) {
  .stats-box {
    width: 300px; /* full width di mobile kecil */
  }
}


</style>
</head>
<body>

<h3 class="title">Ashes of Elysia</h3>

<!-- LOADING OVERLAY -->
<div id="loading-overlay" class="loading-overlay">
  <div>Loading Assets...</div>
  <div class="loading-bar-container">
    <div id="loading-bar" class="loading-bar"></div>
  </div>
</div>

<!-- TUTORIAL OVERLAY -->
<div id="tutorial-overlay" class="tutorial-overlay" style="display: none;">
  <div class="tutorial-content">
    <h2 id="intro-title">Selamat Datang di Ashes of Elysia!</h2>
    <p id="intro-desc">Mari kita pelajari bagian-bagian penting di halaman profil Anda.</p>
    <div class="tutorial-step" id="tutorial-step">
      <div class="highlight-box" id="highlight-box"></div>
      <p id="tutorial-text"><strong>Stats:</strong> Ini adalah statistik karakter Anda. Attack menentukan kekuatan serangan, Max HP adalah kesehatan maksimal, Defense melindungi dari serangan, dan Max MP adalah mana untuk skill.</p>
    </div>
    <button id="tutorial-prev" class="pixel-btn" style="display: none;">Sebelumnya</button>
    <button id="tutorial-next" class="pixel-btn">Lanjut</button>
    <button id="tutorial-skip" class="pixel-btn">Lewati</button>
  </div>
</div>

<div class="container">
  <div class="main-grid">

    <!-- LEFT ================================================================================= -->
    <div class="left-panel">
      <div class="box" style="display: flex; justify-content: space-evenly; color: white">
        <p>ARJUNA99</p>
        <p>(Lv.10)</p>
      </div>

      <!-- Avatar = span 3 rows -->
      <div class="box avatar-box" style="grid-row: span 3;">
        <div class="avatar-section">
          <img src="/img/avatar.png" alt="avatar" class="avatar-img">
        </div>
      </div>

      <div class="box" style="display: flex; justify-content: space-evenly; color: white">
        <p>ðŸª™<span id="player-col">1000000</span></p>
        <p>ðŸ’Ž<span id="player-gems">1000000</span></p>
      </div>

      <div class="box badge-box">
        <div class="badge-section">
          <img src="/img/badge-1.png" alt="badge" class="badge-img">
        </div>
        <div class="badge-section">
          <img src="/img/badge-2.png" alt="badge" class="badge-img">
        </div>
      </div>
    </div>

    <!-- CENTER ============================================================================= -->
    <div class="center-panel">
      <!-- Stats Content = span 3 rows -->
      <div class="box" style="grid-row: span 3;">
        <div class="stats-box">
          <div class="stats-title">STATS</div>

          <div class="stat-row">
            <span class="label"><img src="/img/atk-icon.png" class="icon">Attack</span>
            <span class="value">10,000</span>
          </div>

          <div class="stat-row">
            <img src="/img/hp-icon.png" class="icon">
            <span class="label">Max HP</span>
            <span class="value">200,000</span>
          </div>

          <div class="stat-row">
            <img src="/img/def-icon.png" class="icon">
            <span class="label">Defense</span>
            <span class="value">400</span>
          </div>

          <div class="stat-row">
            <img src="/img/mana-icon.png" class="icon">
            <span class="label">Max MP</span>
            <span class="value">2,000</span>
          </div>
        </div>
      </div>

      <div class="box comp-box">
        <div class="companion-box">Companions</div>
        <div class="companion-box-edit">Edit</div>
      </div>

      <!-- Guardian Box = span 2 rows -->
      <div class="box" style="grid-row: span 2; display: flex;
  justify-content: space-evenly;">
        <div class="companion-section">
          <img src="/img/comp.png" alt="companion" class="companion-img">
        </div>
        <div class="companion-section">
          <img src="/img/comp.png" alt="companion" class="companion-img">
        </div>
      </div>
    </div>

    <!-- RIGHT ============================================================================== -->
    <div class="right-panel">

      <div class="box" style="display: flex;
  justify-content: space-around; align-items: center;">
        <div class="companion-box">Orbs</div>
        <div class="companion-box-edit">Edit</div>
      </div>

      <!-- Orb container = span 3 rows -->
      <div class="box" style="grid-row: span 3;">
            <div class="orb-wrapper">
                <div class="orb-grid">
                    <div class="box-orb">
                      <img src="/img/orb1.png" alt="orb" class="orb-img">
                    </div>
                    <div class="box-orb">
                      <img src="/img/orb1.png" alt="orb" class="orb-img">
                    </div>
                    <div class="box-orb">
                      <img src="/img/orb1.png" alt="orb" class="orb-img">
                    </div>
                    <div class="box-orb">
                      <img src="/img/orb1.png" alt="orb" class="orb-img">
                    </div>
                </div>
            </div>
        </div>

      <!-- BIG BUTTON = span 2 rows -->
      <div class="box pixel-btn" id="masukDunia" style="grid-row: span 2;">Masuk Dunia</div>

    </div>

  </div>
</div>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const overlay = document.getElementById('loading-overlay');
    const loadingBar = document.getElementById('loading-bar');
    const images = document.querySelectorAll('img');
    let loadedCount = 0;
    const totalImages = images.length;

    if (totalImages === 0) {
      overlay.style.display = 'none';
      return;
    }

    images.forEach(img => {
      if (img.complete) {
        loadedCount++;
        updateProgress();
      } else {
        img.addEventListener('load', () => {
          loadedCount++;
          updateProgress();
        });
        img.addEventListener('error', () => {
          loadedCount++;
          updateProgress();
        });
      }
    });

    function updateProgress() {
      const progress = (loadedCount / totalImages) * 100;
      loadingBar.style.width = progress + '%';
      if (loadedCount === totalImages) {
        setTimeout(() => {
          overlay.style.display = 'none';
          showTutorial();
        }, 500); // Small delay for smooth transition
      }
    }

    updateProgress(); // In case some are already loaded
  });

  let currentStep = 0;
  let isIntro = true;
  const tutorialSteps = [
    {
      selector: '.stats-box',
      text: '<strong>Stats:</strong> Ini adalah statistik karakter Anda. Attack menentukan kekuatan serangan, Max HP adalah kesehatan maksimal, Defense melindungi dari serangan, dan Max MP adalah mana untuk skill.'
    },
    {
      selector: '.avatar-section',
      text: '<strong>Avatar:</strong> Ini adalah gambar karakter Anda. Klik untuk mengubah avatar.'
    },
    {
      selector: '.companion-box',
      text: '<strong>Companions:</strong> Ini adalah teman-teman yang membantu dalam petualangan. Klik Edit untuk mengubah companions.'
    },
    {
      selector: '.orb-grid',
      text: '<strong>Orbs:</strong> Ini adalah orbs yang memberikan buff atau skill khusus. Klik Edit untuk mengatur orbs.'
    },
    {
      selector: '#masukDunia',
      text: '<strong>Masuk Dunia:</strong> Klik tombol ini untuk memasuki dunia permainan dan mulai petualangan!'
    }
  ];

  function showTutorial() {
    const tutorialOverlay = document.getElementById('tutorial-overlay');
    tutorialOverlay.style.display = 'flex';
    updateTutorialStep();
  }

  function updateTutorialStep() {
    const highlightBox = document.getElementById('highlight-box');
    const tutorialText = document.getElementById('tutorial-text');
    const tutorialContent = document.querySelector('.tutorial-content');
    const prevBtn = document.getElementById('tutorial-prev');
    const nextBtn = document.getElementById('tutorial-next');

    if (isIntro) {
      // Intro step: center the popup
      tutorialContent.style.top = '50%';
      tutorialContent.style.left = '50%';
      tutorialContent.style.transform = 'translate(-50%, -50%)';
      highlightBox.style.display = 'none';
      document.getElementById('intro-title').style.display = 'block';
      document.getElementById('intro-desc').style.display = 'block';
      tutorialText.innerHTML = '';
      prevBtn.style.display = 'none';
      nextBtn.textContent = 'Lanjut';
    } else {
      // Normal steps
      highlightBox.style.display = 'block';
      tutorialContent.style.transform = 'none';
      document.getElementById('intro-title').style.display = 'none';
      document.getElementById('intro-desc').style.display = 'none';
      const step = tutorialSteps[currentStep];
      const element = document.querySelector(step.selector);

      if (element) {
        const rect = element.getBoundingClientRect();
        highlightBox.style.top = rect.top - 10 + 'px';
        highlightBox.style.left = rect.left - 10 + 'px';
        highlightBox.style.width = rect.width + 20 + 'px';
        highlightBox.style.height = rect.height + 20 + 'px';

        // Position tutorial content to the right of the highlight
        let contentLeft = rect.right + 20;
        let contentTop = rect.top;
        const contentWidth = 420;
        const contentHeight = 300;

        // If not enough space on the right, try left
        if (contentLeft + contentWidth > window.innerWidth) {
          contentLeft = rect.left - contentWidth - 20;
        }

        // If still not, or left is negative, position above or below
        if (contentLeft < 0 || contentLeft + contentWidth > window.innerWidth) {
          contentLeft = Math.max(10, rect.left - 50);
          contentTop = rect.bottom + 20;
          if (contentTop + contentHeight > window.innerHeight) {
            contentTop = rect.top - contentHeight - 20;
          }
        }

        tutorialContent.style.top = contentTop + 'px';
        tutorialContent.style.left = contentLeft + 'px';
      }

      tutorialText.innerHTML = step.text;

      prevBtn.style.display = currentStep > 0 ? 'inline-block' : 'none';
      nextBtn.textContent = currentStep < tutorialSteps.length - 1 ? 'Lanjut' : 'Selesai';
    }
  }

  document.getElementById('tutorial-next').addEventListener('click', () => {
    if (isIntro) {
      isIntro = false;
      currentStep = 0;
      updateTutorialStep();
    } else if (currentStep < tutorialSteps.length - 1) {
      currentStep++;
      updateTutorialStep();
    } else {
      document.getElementById('tutorial-overlay').style.display = 'none';
    }
  });

  document.getElementById('tutorial-prev').addEventListener('click', () => {
    if (currentStep > 0) {
      currentStep--;
      updateTutorialStep();
    }
  });

  document.getElementById('tutorial-skip').addEventListener('click', () => {
    document.getElementById('tutorial-overlay').style.display = 'none';
  });

  document.getElementById("masukDunia").addEventListener("click", enterMap);

  function enterMap() {
      window.location.href = 'map.html';
    }
</script>
</body>
</html>
